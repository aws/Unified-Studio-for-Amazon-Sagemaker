workflow_combined:
  dag_id: 'covid_etl_workflow'
  tasks:
    data_discovery_task:
      operator: airflow.providers.amazon.aws.operators.glue.GlueJobOperator
      retries: 0
      job_name: discovery-glue-job
      script_location: 's3://amazon-sagemaker-198737698272-us-east-1-4pg255jku47vdz/shared/etl/bundle/glue_s3_list_job.py'
      s3_bucket: 'amazon-sagemaker-198737698272-us-east-1-4pg255jku47vdz'
      iam_role_name: 'SMUSCICDTestRole'
      region_name: 'us-east-1'
      script_args:
        '--BUCKET_NAME': 'amazon-sagemaker-198737698272-us-east-1-4pg255jku47vdz'
        '--REGION_NAME': 'us-east-1'
      create_job_kwargs:
        GlueVersion: '4.0'
        MaxRetries: 0
        Timeout: 180

    data_summary_task:
      operator: airflow.providers.amazon.aws.operators.glue.GlueJobOperator
      retries: 0
      job_name: summary-glue-job
      script_location: 's3://amazon-sagemaker-198737698272-us-east-1-4pg255jku47vdz/shared/etl/bundle/glue_covid_summary_job.py'
      s3_bucket: 'amazon-sagemaker-198737698272-us-east-1-4pg255jku47vdz'
      iam_role_name: 'SMUSCICDTestRole'
      region_name: 'us-east-1'
      script_args:
        '--DATABASE_NAME': 'covid19_db'
        '--TABLE_NAME': 'us_simplified'
        '--SUMMARY_DATABASE_NAME': 'covid19_summary_db'
        '--S3_DATABASE_PATH': 's3://amazon-sagemaker-198737698272-us-east-1-4pg255jku47vdz/shared/etl/output/databases/covid19_summary_db/'
      dependencies: [data_discovery_task]
      create_job_kwargs:
        GlueVersion: '4.0'
        MaxRetries: 0
        Timeout: 180
